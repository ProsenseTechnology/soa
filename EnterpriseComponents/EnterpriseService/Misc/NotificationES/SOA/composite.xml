<?xml version="1.0" encoding="UTF-8" ?>
<!--Generated by Oracle SOA Modeler version 12.1.3.0.1 at [4/19/15 7:14 AM].-->
<composite name="NotificationES" revision="1.0" label="2015-02-25_17-30-24_935" mode="active" state="on" xmlns="http://xmlns.oracle.com/sca/1.0"
           xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy"
           xmlns:orawsp="http://schemas.oracle.com/ws/2006/01/policy" xmlns:ui="http://xmlns.oracle.com/soa/designer/"
           xmlns:sca-ext="http://xmlns.oracle.com/sca/1.0-ext">
    <import namespace="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1" location="WSDLs/NotificationESWrapper.wsdl" importType="wsdl"/>
    <import namespace="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1"
            location="oramds:/apps/ESBMetadata/ComponentLibrary/EnterpriseServices/Misc/Notification/V1/NotificationES.wsdl"
            importType="wsdl"/>
    <import namespace="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1"
            location="WSDLs/NotificationESWrapper.wsdl" importType="wsdl"/>
    <import namespace="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1"
            location="WSDLs/NotificationESWrapper.wsdl" importType="wsdl"/>
    <import namespace="http://xmlns.oracle.com/ias/pcbpel/NotificationService"
            location="oramds:/soa/shared/workflow/NotificationService.wsdl" importType="wsdl"/>
    <import namespace="http://xmlns.equitybank.co.ke/ESB/PS/Safaricom/Notification/V1"
            location="oramds:/apps/ESBMetadata/ComponentLibrary/ProviderServices/Safaricom/Notification/V1/NotificationPS.wsdl" importType="wsdl"/>
    <import namespace="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1"
            location="WSDLs/NotificationESWrapper1.wsdl" importType="wsdl"/>
    <import namespace="http://xmlns.equitybank.co.ke/ESB/BS/Party/Customer/V1"
            location="oramds:/apps/ESBMetadata/ComponentLibrary/BusinessServices/Party/Customer/V1/CustomerBS.wsdl"
            importType="wsdl"/>
    <import namespace="http://xmlns.oracle.com/pcbpel/adapter/ums/EnterpriseService.Misc/NotificationES/readNotification"
            location="WSDLs/readNotification.wsdl" importType="wsdl"/>
    <import namespace="http://xmlns.oracle.com/pcbpel/adapter/ums/EnterpriseService.Misc/NotificationES/readNotification"
            location="WSDLs/ReadNotification.wsdl" importType="wsdl"/>
    <service name="NotificationES_direct" ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
        <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
        <binding.direct/>
    </service>
    <service name="readNotification" ui:wsdlLocation="WSDLs/readNotification.wsdl">
        <interface.wsdl interface="http://xmlns.oracle.com/pcbpel/adapter/ums/EnterpriseService.Misc/NotificationES/readNotification#wsdl.interface(ReceiveNotification_ptt)"/>
        <binding.jca config="Adapters/readNotification_ums.jca">
            <property name="useRejectedMessageRecovery" type="xs:string" many="false" override="may">true</property>
        </binding.jca>
    </service>
    <property name="compositeID" type="xs:string" many="false">NotificationESV1</property>
    <property name="productVersion" type="xs:string" many="false">12.1.3.0.1</property>
    <component name="NotificationRouter">
        <implementation.mediator src="Mediators/NotificationRouter.mplan"/>
        <componentType>
            <service name="NotificationRouter"
                     ui:wsdlLocation="oramds:/apps/ESBMetadata/ComponentLibrary/EnterpriseServices/Misc/Notification/V1/NotificationES.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </service>
            <reference name="SendSms.sendSms" ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(SMSNotificationPort)"/>
            </reference>
            <reference name="SendEmail.sendEmail" ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(EMAILNotificationPort)"/>
            </reference>
            <reference name="ReadEmail.ReadEmailPL" ui:wsdlLocation="WSDLs/NotificationESWrapper1.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </reference>
        </componentType>
    </component>
    <component name="SendSms" version="2.0">
        <implementation.bpel src="BPEL/SendSms.bpel"/>
        <componentType>
            <service name="SendSmsPL" ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(SMSNotificationPort)"/>
            </service>
            <reference name="NotificationProvRouterPL"
                       ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </reference>
        </componentType>
        <property name="bpel.config.transaction" type="xs:string" many="false">requiresNew</property>
    </component>
    <component name="SendEmail" version="2.0">
        <implementation.bpel src="BPEL/SendEmail.bpel"/>
        <componentType>
            <service name="SendEmailPL" ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(EMAILNotificationPort)"/>
            </service>
            <reference name="NotificationProvRouterPL"
                       ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </reference>
        </componentType>
        <property name="bpel.config.transaction" type="xs:string" many="false">requiresNew</property>
    </component>
    <component name="NotificationProvRouter">
        <implementation.mediator src="Mediators/NotificationProvRouter.mplan"/>
        <componentType>
            <service name="NotificationProvRouter" ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </service>
            <reference name="NotificationService"
                       ui:wsdlLocation="oramds:/soa/shared/workflow/NotificationService.wsdl">
                <interface.wsdl interface="http://xmlns.oracle.com/ias/pcbpel/NotificationService#wsdl.interface(NotificationService)"/>
            </reference>
            <reference name="NotificationPS"
                       ui:wsdlLocation="oramds:/apps/ESBMetadata/ComponentLibrary/ProviderServices/Safaricom/Notification/V1/NotificationPS.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/PS/Safaricom/Notification/V1#wsdl.interface(NotificationPSPort)"/>
            </reference>
            <reference name="CustomerBS"
                       ui:wsdlLocation="oramds:/apps/ESBMetadata/ComponentLibrary/BusinessServices/Party/Customer/V1/CustomerBS.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/BS/Party/Customer/V1#wsdl.interface(CustomerBSPort)"/>
            </reference>
        </componentType>
    </component>
    <component name="ReadEmail" version="2.0">
        <implementation.bpel src="BPEL/ReadEmail.bpel"/>
        <componentType>
            <service name="ReadEmailPL" ui:wsdlLocation="WSDLs/NotificationESWrapper1.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </service>
            <reference name="NotificationProvRouterPL"
                       ui:wsdlLocation="WSDLs/NotificationESWrapper.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </reference>
        </componentType>
        <property name="bpel.config.transaction" type="xs:string" many="false">required</property>
    </component>
    <component name="NotificationEmail">
        <implementation.mediator src="Mediators/NotificationEmail.mplan"/>
        <componentType>
            <service name="NotificationEmail" ui:wsdlLocation="WSDLs/ReadNotification.wsdl">
                <interface.wsdl interface="http://xmlns.oracle.com/pcbpel/adapter/ums/EnterpriseService.Misc/NotificationES/readNotification#wsdl.interface(ReceiveNotification_ptt)"/>
            </service>
            <reference name="ReadEmail.ReadEmailPL" ui:wsdlLocation="WSDLs/NotificationESWrapper1.wsdl">
                <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/ES/Misc/Notification/V1#wsdl.interface(NotificationESPort)"/>
            </reference>
        </componentType>
    </component>
    <reference name="NotificationService" ui:wsdlLocation="oramds:/soa/shared/workflow/NotificationService.wsdl">
        <interface.wsdl interface="http://xmlns.oracle.com/ias/pcbpel/NotificationService#wsdl.interface(NotificationService)"/>
        <binding.wsif port="http://xmlns.oracle.com/ias/pcbpel/NotificationService#wsdl.endpoint(NotificationService/JavaPort)"
                      location="oramds:/soa/shared/workflow/NotificationService.wsdl"/>
    </reference>
    <reference name="NotificationPS" ui:wsdlLocation="oramds:/apps/ESBMetadata/ComponentLibrary/ProviderServices/Safaricom/Notification/V1/NotificationPS.wsdl">
        <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/PS/Safaricom/Notification/V1#wsdl.interface(NotificationPSPort)"/>
        <binding.rest config="oramds:/apps/ESBMetadata/ComponentLibrary/ProviderServices/Safaricom/Notification/V1/NotificationPS.wadl" 
        location="http://soa3host1vhn2dev.ebsafrica.com:8011/ESB/PS/Safaricom/REST/Notification"/>
    </reference>
    <reference name="CustomerBS"
               ui:wsdlLocation="oramds:/apps/ESBMetadata/ComponentLibrary/BusinessServices/Party/Customer/V1/CustomerBS.wsdl">
        <interface.wsdl interface="http://xmlns.equitybank.co.ke/ESB/BS/Party/Customer/V1#wsdl.interface(CustomerBSPort)"/>
        <binding.direct address="soadirect:/Accounts/AccountES/AccountES_direct"
                        connection-factory="oracle.soa.api.JNDIDirectConnectionFactory" useLocalJNDIProvider="false">
            <property name="java.naming.provider.url">t3://localhost:7001/</property>
        </binding.direct>
    </reference>
    <wire>
        <source.uri>NotificationES_direct</source.uri>
        <target.uri>NotificationRouter/NotificationRouter</target.uri>
    </wire>
    <wire>
        <source.uri>NotificationRouter/SendSms.sendSms</source.uri>
        <target.uri>SendSms/SendSmsPL</target.uri>
    </wire>
    <wire>
        <source.uri>NotificationRouter/SendEmail.sendEmail</source.uri>
        <target.uri>SendEmail/SendEmailPL</target.uri>
    </wire>
    <wire>
        <source.uri>SendSms/NotificationProvRouterPL</source.uri>
        <target.uri>NotificationProvRouter/NotificationProvRouter</target.uri>
    </wire>
    <wire>
        <source.uri>NotificationProvRouter/NotificationService</source.uri>
        <target.uri>NotificationService</target.uri>
    </wire>
    <wire>
        <source.uri>SendEmail/NotificationProvRouterPL</source.uri>
        <target.uri>NotificationProvRouter/NotificationProvRouter</target.uri>
    </wire>
    <wire>
        <source.uri>NotificationProvRouter/NotificationPS</source.uri>
        <target.uri>NotificationPS</target.uri>
    </wire>
    <wire>
        <source.uri>ReadEmail/NotificationProvRouterPL</source.uri>
        <target.uri>NotificationProvRouter/NotificationProvRouter</target.uri>
    </wire>
    <wire>
        <source.uri>NotificationProvRouter/CustomerBS</source.uri>
        <target.uri>CustomerBS</target.uri>
    </wire>
    <wire>
        <source.uri>NotificationRouter/ReadEmail.ReadEmailPL</source.uri>
        <target.uri>ReadEmail/ReadEmailPL</target.uri>
    </wire>
    <wire>
        <source.uri>readNotification</source.uri>
        <target.uri>NotificationEmail/NotificationEmail</target.uri>
    </wire>
    <wire>
        <source.uri>NotificationEmail/ReadEmail.ReadEmailPL</source.uri>
        <target.uri>ReadEmail/ReadEmailPL</target.uri>
    </wire>
</composite>
